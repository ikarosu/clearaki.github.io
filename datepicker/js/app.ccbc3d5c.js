(function(t){function e(e){for(var a,s,o=e[0],c=e[1],l=e[2],d=0,f=[];d<o.length;d++)s=o[d],r[s]&&f.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={1:0},i=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/datepicker/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([3,0]),n()})({3:function(t,e,n){t.exports=n("Vtdi")},EDI0:function(t,e,n){},IrED:function(t,e,n){},Vtdi:function(t,e,n){"use strict";n.r(e);n("VRzm");var a=n("Kw5r"),r=(n("HRMj"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.startDate,expression:"startDate"}],attrs:{type:"date",readonly:""},domProps:{value:t.startDate},on:{click:function(e){t.show=!0},input:function(e){e.target.composing||(t.startDate=e.target.value)}}}),t._v("\n  -\n  "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.endDate,expression:"endDate"}],attrs:{type:"date",readonly:""},domProps:{value:t.endDate},on:{click:function(e){t.show=!0},input:function(e){e.target.composing||(t.endDate=e.target.value)}}}),n("DatePicker",{ref:"date",attrs:{restday:t.restday,workday:t.workday,display:t.show,custom:t.data,autoComplete:""},on:{select:t.select,cancel:t.cancel,selectDisabled:t.selectErr,viewport:t.viewport,click:t.click,clickStart:t.clickStart,clickEnd:t.clickEnd}})],1)}),i=[],s=(n("KKXr"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"wrap",class:{hide:!t.display},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.$emit("cancel")}}},[n("div",{staticClass:"content"},[n("header",[n("a",{staticClass:"left",on:{click:function(e){t.$emit("cancel")}}},[t._v("取消")]),n("strong",[t._v("选择日期")]),t.autoComplete?t._e():n("a",{staticClass:"right",on:{click:t.confirm}},[t._v("确认")])]),n("div",{staticClass:"week-text"},t._l(t.weekTexts,function(e,a){return n("span",{key:a,style:{color:t.mondayFirst?5==a||6==a?"tomato":"":0==a||6==a?"tomato":""}},[t._v(t._s(e))])})),n("main",t._l(t.months,function(e,a){return n("section",{key:a,staticClass:"aki-month",attrs:{"data-date":new Date(e.year,Number(e.month)-1),"data-year":e.year,"data-month":e.month}},[n("header",[t._v(t._s(e.year)+"年 "+t._s(e.month)+"月")]),n("div",{staticClass:"day-wrap"},t._l(e.days,function(e,a){return n("div",{key:a,staticClass:"day",class:{disabled:e.disabled,active:e.active,select:e.begin||e.end},style:{"background-color":e.custom.bgcolor,"border-color":e.custom.bdcolor},on:{click:function(n){t.selectOne(e)}}},[n("span",[t._v(t._s(e.begin?t.beginningText:e.end?t.endText:" "))]),n("span",{staticClass:"number",class:{restday:e.restday,rest:e.rest,workday:e.workday}},[t._v(t._s(e.text))]),n("span",{class:{rest:e.custom.highlight}},[t._v(t._s(e.custom.text||" "))])])}))])}))])])}),o=[],c=(n("Z2Ku"),n("L9s1"),n("a94B")),l=n("k5N+"),u=(n("HEwt"),n("rGqo"),n("INYr"),n("xfY5"),n("xmWZ")),d=n("qpph"),f=function(){function t(){Object(u["a"])(this,t)}return Object(d["a"])(t,[{key:"year",get:function(){return(new Date).getFullYear()}},{key:"month",get:function(){return(new Date).getMonth()+1}},{key:"day",get:function(){return(new Date).getDate()}},{key:"date",get:function(){return"".concat(this.year,"-").concat(this.month,"-").concat(this.day)}}]),t}(),h={props:{single:{type:Boolean,default:function(){return!1}},autoComplete:{type:Boolean,default:function(){return!1}},display:{type:Boolean,default:function(){return!1}},mondayFirst:{type:Boolean,default:function(){return!1}},reverseSelect:{type:Boolean,default:function(){return!1}},restday:{type:Array,default:function(){return[]}},workday:{type:Array,default:function(){return[]}},displayRange:{type:Number,default:function(){return 13}},displayRangeStart:{type:String,default:function(){return(new f).date}},selectRangeStart:{type:String,default:function(){return(new f).date}},selectRangeEnd:{type:String,default:function(){return"9999-99-99"}},custom:{type:Array,default:function(){return[]}},beginningText:{type:String,default:function(){return"入住"}},endText:{type:String,default:function(){return"离店"}}},data:function(){return{months:[],firstTime:!0,firstSelectDay:{},lastSelectDay:{},rangeList:[],customIndex:0,range:[],doms:[],observer:null}},computed:{weekTexts:function(){var t=["日","一","二","三","四","五","六"];return this.mondayFirst&&t.push(t.shift()),t},$date:function(){return new f},mIndexBegin:function(){var t=this;return this.months.findIndex(function(e){return e.year===t.firstSelectDay.year&&e.month===t.firstSelectDay.month})},mIndexEnd:function(){var t=this;return this.months.findIndex(function(e){return e.year===t.lastSelectDay.year&&e.month===t.lastSelectDay.month})}},watch:{restday:function(){var t=this,e=this;this.restday.length&&this.deconstruction(function(n){t.restday.forEach(function(t){var a=new Date(t),r=[a.getFullYear(),a.getMonth()+1,a.getDate()],i=r[0],s=r[1],o=r[2];i===n.year&&s===n.month&&o===n.day&&(e.$set(n,"rest",!0),e.$set(n,"restday",!0))})})},workday:function(){var t=this,e=this;this.workday.length&&this.deconstruction(function(n){t.workday.forEach(function(t){var a=new Date(t),r=[a.getFullYear(),a.getMonth()+1,a.getDate()],i=r[0],s=r[1],o=r[2];i===n.year&&s===n.month&&o===n.day&&(e.$set(n,"rest",!1),e.$set(n,"workday",!0))})})},custom:function(){this.setcustom()},months:function(){this.doms=Array.from(document.querySelectorAll(".aki-month"))},display:function(t){var e=this;t&&this.doms.forEach(function(t){return e.observer.observe(t)})}},created:function(){for(var t=this,e=[],n=this.displayRangeStart.split("-").map(Number),a=Object(l["a"])(n,2),r=a[0],i=a[1],s=this.selectRangeStart.split("-").map(Number),o=Object(l["a"])(s,3),c=o[0],u=o[1],d=o[2],f=this.selectRangeEnd.split("-").map(Number),h=Object(l["a"])(f,3),m=h[0],y=h[1],g=h[2],p=r,v=i,D=0,b=0;b<this.displayRange;b++){i+b>12?(p=r+1,v=i+b-12):v=i+b;var w=[],k=new Date(p,v-1,1).getDay();this.mondayFirst&&(k=0===k?6:k-1);for(var S=0;S<k;S++)D++,w.push({custom:{}});for(var x=new Date(p,v,0).getDate(),T=function(e){var n={custom:{}};n.year=p,n.month=v,n.day=e,n.date="".concat(p,"-").concat(v,"-").concat(e),n.odate="".concat(p,"-").concat(v>9?v:"0"+v,"-").concat(e>9?e:"0"+e),n.text=p===t.$date.year&&v===t.$date.month&&e===t.$date.day?"今天":e;var a=new Date(p,v-1,e).getDay(),r=6===a||0===a;p<c||p>m?n.disabled=!0:p===c?v<u||v>y?n.disabled=!0:v===u?e<d||e>g?n.disabled=!0:(n.rest=e>d&&r,e===d&&(t.customIndex=D)):n.rest=r:n.rest=r,t.restday.length&&t.restday.forEach(function(t){t===n.date&&(n.restday=n.rest=!0)}),t.workday.length&&t.workday.forEach(function(t){t===n.date&&(n.workday=!0,n.rest=!1)}),D++,w.push(n)},$=1;$<=x;$++)T($);e.push({year:p,month:v,days:w})}this.months=e,this.setcustom();try{this.observer=new IntersectionObserver(function(e){e.forEach(function(e){if(e.intersectionRatio<=0)return!1;var n=e.target.dataset,a=n.year,r=n.month,i=n.date;t.$emit("viewport",{year:a,month:r,date:i})})})}catch(t){throw t}},methods:{selectOne:function(t){var e=this;if(!t.text)return!1;var n=t.disabled,a=t.custom;if(n)return!1;if(a&&a.disabled&&this.firstTime)return this.$emit("selectDisabled",t),!1;if(this.single)this.$emit("click",t),this.$set(this.lastSelectDay,"begin",!1),this.firstSelectDay=t,this.$set(t,"begin",!0),this.lastSelectDay=this.firstSelectDay,this.confirm();else if(this.firstTime){if(this.$emit("click",t,!0),this.$emit("clickStart",t),this.firstTime=!1,this.mIndexBegin>-1&&this.mIndexEnd>-1)for(var r=this.mIndexBegin;r<=this.mIndexEnd;r++)this.months[r].days.forEach(function(t){e.getTimestamp(t)===e.getTimestamp(e.firstSelectDay)&&e.$set(t,"begin",!1),e.getTimestamp(t)>e.getTimestamp(e.firstSelectDay)&&e.getTimestamp(t)<e.getTimestamp(e.lastSelectDay)&&e.$set(t,"active",!1),e.getTimestamp(t)===e.getTimestamp(e.lastSelectDay)&&e.$set(t,"end",!1)});this.firstSelectDay=t,this.$set(t,"begin",!0)}else{if(this.$emit("click",{target:t,start:!1}),this.$emit("clickEnd",t),this.getTimestamp(t)===this.getTimestamp(this.firstSelectDay))return this.firstTime=!0,this.$set(t,"begin",!1),this.firstSelectDay={},!1;if(this.getTimestamp(t)<this.getTimestamp(this.firstSelectDay))if(this.firstTime=!0,this.reverseSelect){var i=this.firstSelectDay;this.lastSelectDay=i,this.firstSelectDay=t,this.chooseRange().then(function(t){var n=t.range,a=t.activeDays;e.firstTime=!0,e.$set(i,"begin",!1),e.$set(e.firstSelectDay,"begin",!0),e.$set(e.lastSelectDay,"end",!0),a.forEach(function(t){return e.$set(t,"active",!0)}),e.range=n,e.autoComplete&&e.confirm()}).catch(function(t){e.firstTime=!1,e.firstSelectDay=i,e.lastSelectDay={},e.$emit("selectDisabled",t)})}else this.$set(this.firstSelectDay,"begin",!1),this.$set(t,"begin",!0),this.firstSelectDay=t,this.firstTime=!1;else this.lastSelectDay=t,this.chooseRange().then(function(n){var a=n.range,r=n.activeDays;e.firstTime=!0,e.$set(t,"end",!0),r.forEach(function(t){return e.$set(t,"active",!0)}),e.range=a,e.autoComplete&&e.confirm()}).catch(function(t){e.firstTime=!1,e.$emit("selectDisabled",t)})}},getTimestamp:function(t){return new Date(t.year,t.month-1,t.day).getTime()},chooseRange:function(){var t=this;return new Promise(function(e,n){t.mIndexBegin>-1&&t.mIndexEnd>-1?function(){for(var a=[],r=[],i=t.mIndexBegin;i<=t.mIndexEnd;i++)a=a.concat(t.months[i].days.filter(function(e){if(t.getTimestamp(e)>t.getTimestamp(t.firstSelectDay)&&t.getTimestamp(e)<t.getTimestamp(t.lastSelectDay)){if(!e.custom||!e.custom.disabled)return r.push(e),e;n(e)}}));e({range:a,activeDays:r})}():e(new Array)})},confirm:function(){this.$emit("select",{start:this.firstSelectDay,end:this.lastSelectDay,range:this.range})},deconstruction:function(t){this.months.forEach(function(e){e.days.forEach(function(e){t(e)})})},setcustom:function(){if(this.custom.length){var t=[];this.months.forEach(function(e){return t=t.concat(e.days)});for(var e=this.customIndex,n=0;n<this.custom.length;e++,n++){var a=t[e],r=this.custom[n];if(a.text&&r){var i=Object(c["a"])(r);if("string"===i)this.$set(a,"custom",{text:r});else{if("object"!==i)throw"custom数组每项的类型应该是String或Object，但是得到的是".concat(i);this.$set(a,"custom",r)}}}}},setData:function(t,e){var n,a=["-","/",","],r=a.some(function(t){return(n=t)&&e.includes(t)});if(!r)throw'Date format error.Got "'.concat(e,'".It\'s should be like "YYYY-MM-DD".');var i,s=e.split(n).map(Number),o=Object(l["a"])(s,3),c=o[0],u=o[1],d=o[2];if(this.months.some(function(t){return i=t.days.filter(function(t){var e=t.year,n=t.month,a=t.day;return e===c&&n===u&&a===d}),i.length>0}),!i.length)throw'Date format error.Got "'.concat(e,'".It\'s should be like "YYYY-MM-DD".');for(var f in t)if(t.hasOwnProperty(f)){var h=t[f];this.$set(i[0].custom,f,h)}}}},m=h,y=(n("fYqn"),n("KHd+")),g=Object(y["a"])(m,s,o,!1,null,"38920b28",null),p=g.exports,v=n("dYLW"),D={components:{DatePicker:p},data:function(){return{startDate:"",endDate:"",restday:[],workday:["2018-9-29","2018-9-30"],data:["￥1300","￥1345",{highlight:!0,text:"￥999"}],show:!1}},methods:{select:function(t){var e=t.start,n=t.end,a=t.range;this.startDate=e.odate,this.endDate=n.odate,console.log("range",a),this.show=!1},cancel:function(){this.show=!1},selectErr:function(t){console.log("date",t),Object(v["a"])("无法选择该范围：".concat(t.date,"为").concat(t.custom.dec))},viewport:function(t){var e=t.year,n=t.month,a=t.date;console.log("date",a),console.log("现在出现在视线内的是：","".concat(e,"-").concat(n))},click:function(t,e){console.log("click",t),console.log("click",e)},clickStart:function(t){console.log("start",t);var e=new Date(t.date).getTime()+6048e5,n=new Date(e).toJSON().split("T")[0];this.$refs.date.setData({bdcolor:"orange"},n)},clickEnd:function(t){console.log("end",t)}},created:function(){var t=this;setTimeout(function(){t.workday=["2018-8-25","2018-8-26","2018-8-27"],t.restday=["2018-8-22","2018-8-23","2018-8-24"],t.data=["￥1999",{text:"￥2018",bgcolor:"lightgreen"},"","","","",{highlight:!0,text:"￥666",bgcolor:"gold"},{highlight:!0,text:"￥888"},"","",{disabled:!0,bgcolor:"red",dec:"正在维修"}],setTimeout(function(){t.workday=["2018-8-25","2018-8-26","2018-8-27"],t.restday=["2018-8-22","2018-8-23","2018-8-24"],t.data=["￥1922",{text:"￥2018",bgcolor:"lightgreen"},"","","",{highlight:!0,text:"￥666",bgcolor:"gold"},{highlight:!0,text:"￥888"},"","",{disabled:!0,bgcolor:"red",dec:"正在维修"}]},2e3)},2e3)}},b=D,w=(n("ZL7j"),Object(y["a"])(b,r,i,!1,null,null,null)),k=w.exports;p.install=function(t){return t.component("AkiDate",p)};var S=p;a["a"].use(S),new a["a"]({render:function(t){return t(k)}}).$mount("#app")},ZL7j:function(t,e,n){"use strict";var a=n("EDI0"),r=n.n(a);r.a},fYqn:function(t,e,n){"use strict";var a=n("IrED"),r=n.n(a);r.a}});
//# sourceMappingURL=app.ccbc3d5c.js.map