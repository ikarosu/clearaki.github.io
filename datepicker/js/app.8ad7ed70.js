(function(t){function e(e){for(var a,i,o=e[0],c=e[1],u=e[2],d=0,f=[];d<o.length;d++)i=o[d],r[i]&&f.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={1:0},s=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;s.push([2,0]),n()})({2:function(t,e,n){t.exports=n("Vtdi")},EDI0:function(t,e,n){},MmKO:function(t,e,n){},UFR0:function(t,e,n){"use strict";var a=n("MmKO"),r=n.n(a);r.a},Vtdi:function(t,e,n){"use strict";n.r(e);n("VRzm");var a=n("Kw5r"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.startDate,expression:"startDate"}],attrs:{type:"date",readonly:""},domProps:{value:t.startDate},on:{touchstart:function(e){t.show=!0},input:function(e){e.target.composing||(t.startDate=e.target.value)}}}),t._v("\n  -\n  "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.endDate,expression:"endDate"}],attrs:{type:"date",readonly:""},domProps:{value:t.endDate},on:{touchstart:function(e){t.show=!0},input:function(e){e.target.composing||(t.endDate=e.target.value)}}}),n("DatePicker",{attrs:{restday:t.restday,workday:t.workday,display:t.show,customData:t.data,autoComplete:""},on:{select:t.select,cancle:t.cancle}})],1)},s=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"wrap",class:{hide:!t.display},on:{touchstart:function(e){if(e.target!==e.currentTarget)return null;t.$emit("cancle")}}},[n("div",{staticClass:"content"},[n("header",[n("a",{staticClass:"left",on:{touchstart:function(e){t.$emit("cancle")}}},[t._v("取消")]),n("strong",[t._v("选择日期")]),t.autoComplete?t._e():n("a",{staticClass:"right",on:{touchstart:t.confirm}},[t._v("确认")])]),n("div",{staticClass:"week-text"},t._l(t.weekTexts,function(e,a){return n("span",{key:a,style:{color:t.mondayFirst?5==a||6==a?"tomato":"":0==a||6==a?"tomato":""}},[t._v(t._s(e))])})),n("main",t._l(t.months,function(e,a){return n("section",{key:a,staticClass:"month"},[n("header",[t._v(t._s(e.year)+"年 "+t._s(e.month)+"月")]),n("div",{staticClass:"day-wrap"},t._l(e.days,function(e,a){return n("div",{key:a,staticClass:"day",class:{disable:e.disable,active:e.active,select:e.begin||e.end},style:{"background-color":e.custom&&e.custom.bgcolor},on:{click:function(n){t.selectOne(e)}}},[n("span",[t._v(t._s(e.begin?t.beginningText:e.end?t.endText:" "))]),n("span",{staticClass:"number",class:{restday:e.restday,rest:e.rest,workday:e.workday}},[t._v(t._s(e.text))]),e.custom?n("span",{class:{rest:e.custom.highlight}},[t._v(t._s(e.custom.text))]):n("span",[t._v(" ")])])}))])}))])])},o=[],c=n("a94B"),u=(n("KKXr"),n("k5N+")),l=(n("rGqo"),n("INYr"),n("xfY5"),n("xmWZ")),d=n("qpph"),f=function(){function t(){Object(l["a"])(this,t)}return Object(d["a"])(t,[{key:"year",get:function(){return(new Date).getFullYear()}},{key:"month",get:function(){return(new Date).getMonth()+1}},{key:"day",get:function(){return(new Date).getDate()}},{key:"date",get:function(){return"".concat(this.year,"-").concat(this.month,"-").concat(this.day)}}]),t}(),h={props:{autoComplete:{type:Boolean,default:function(){return!1}},display:{type:Boolean,default:function(){return!1}},mondayFirst:{type:Boolean,default:function(){return!1}},reverseSelect:{type:Boolean,default:function(){return!1}},restday:{type:Array,default:function(){return[]}},workday:{type:Array,default:function(){return[]}},displayRange:{type:Number,default:function(){return 13}},displayRangeStart:{type:String,default:function(){return(new f).date}},selectRangeStart:{type:String,default:function(){return(new f).date}},selectRangeEnd:{type:String,default:function(){return"9999-99-99"}},customData:{type:Array,default:function(){return[]}},beginningText:{type:String,default:function(){return"入住"}},endText:{type:String,default:function(){return"离店"}}},data:function(){return{months:[],firstTime:!0,firstSelectDay:{},lastSelectDay:{},rangeList:[],customDataIndex:0,range:[]}},computed:{weekTexts:function(){var t=["日","一","二","三","四","五","六"];return this.mondayFirst&&t.push(t.shift()),t},$date:function(){return new f},mIndexBegin:function(){var t=this;return this.months.findIndex(function(e){return e.year===t.firstSelectDay.year&&e.month===t.firstSelectDay.month})},mIndexEnd:function(){var t=this;return this.months.findIndex(function(e){return e.year===t.lastSelectDay.year&&e.month===t.lastSelectDay.month})}},watch:{restday:function(){var t=this,e=this;this.restday.length&&this.deconstruction(function(n){t.restday.forEach(function(t){var a=new Date(t),r=[a.getFullYear(),a.getMonth()+1,a.getDate()],s=r[0],i=r[1],o=r[2];s===n.year&&i===n.month&&o===n.day&&(e.$set(n,"rest",!0),e.$set(n,"restday",!0))})})},workday:function(){var t=this,e=this;this.workday.length&&this.deconstruction(function(n){t.workday.forEach(function(t){var a=new Date(t),r=[a.getFullYear(),a.getMonth()+1,a.getDate()],s=r[0],i=r[1],o=r[2];s===n.year&&i===n.month&&o===n.day&&(e.$set(n,"rest",!1),e.$set(n,"workday",!0))})})},customData:function(){this.setCustomData()}},created:function(){for(var t=this,e=[],n=this.displayRangeStart.split("-").map(Number),a=Object(u["a"])(n,2),r=a[0],s=a[1],i=this.selectRangeStart.split("-").map(Number),o=Object(u["a"])(i,3),c=o[0],l=o[1],d=o[2],f=this.selectRangeEnd.split("-").map(Number),h=Object(u["a"])(f,3),m=h[0],y=h[1],g=h[2],p=r,v=s,D=0,w=0;w<this.displayRange;w++){s+w>12?(p=r+1,v=s+w-12):v=s+w;var b=[],x=new Date(p,v-1,1).getDay();this.mondayFirst&&(x=0===x?6:x-1);for(var S=0;S<x;S++)D++,b.push({});for(var T=new Date(p,v,0).getDate(),k=function(e){var n={};n.year=p,n.month=v,n.day=e,n.date="".concat(p,"-").concat(v,"-").concat(e),n.odate="".concat(p,"-").concat(v>9?v:"0"+v,"-").concat(e>9?e:"0"+e),n.text=p===t.$date.year&&v===t.$date.month&&e===t.$date.day?"今天":e;var a=new Date(p,v-1,e).getDay(),r=6===a||0===a;p<c||p>m?n.disable=!0:p===c?v<l||v>y?n.disable=!0:v===l?e<d||e>g?n.disable=!0:(n.rest=e>d&&r,e===d&&(t.customDataIndex=D)):n.rest=r:n.rest=r,t.restday.length&&t.restday.forEach(function(t){t===n.date&&(n.restday=n.rest=!0)}),t.workday.length&&t.workday.forEach(function(t){t===n.date&&(n.workday=!0,n.rest=!1)}),D++,b.push(n)},_=1;_<=T;_++)k(_);e.push({year:p,month:v,days:b})}this.months=e,this.setCustomData()},methods:{selectOne:function(t){var e=this,n=t.disable;if(n)return!1;if(!t.text)return!1;if(this.firstTime){if(this.firstTime=!1,this.mIndexBegin>-1&&this.mIndexEnd>-1)for(var a=this.mIndexBegin;a<=this.mIndexEnd;a++)this.months[a].days.map(function(t){e.getTimestamp(t)===e.getTimestamp(e.firstSelectDay)&&e.$set(t,"begin",!1),e.getTimestamp(t)>e.getTimestamp(e.firstSelectDay)&&e.getTimestamp(t)<e.getTimestamp(e.lastSelectDay)&&e.$set(t,"active",!1),e.getTimestamp(t)===e.getTimestamp(e.lastSelectDay)&&e.$set(t,"end",!1)});this.firstSelectDay=t,this.$set(t,"begin",!0)}else{if(this.getTimestamp(t)===this.getTimestamp(this.firstSelectDay))return!1;this.getTimestamp(t)<this.getTimestamp(this.firstSelectDay)?(this.firstTime=!0,this.reverseSelect?(this.$set(this.firstSelectDay,"begin",!1),this.lastSelectDay=this.firstSelectDay,this.firstSelectDay=t,this.$set(this.firstSelectDay,"begin",!0),this.$set(this.lastSelectDay,"end",!0),this.chooseRange().then(function(t){e.range=t,e.autoComplete&&e.confirm()})):(this.$set(this.firstSelectDay,"begin",!1),this.$set(t,"begin",!0),this.firstSelectDay=t,this.firstTime=!1)):(this.firstTime=!0,this.lastSelectDay=t,this.$set(t,"end",!0),this.chooseRange().then(function(t){e.range=t,e.autoComplete&&e.confirm()}))}},getTimestamp:function(t){return new Date(t.year,t.month-1,t.day).getTime()},chooseRange:function(){var t=this;return new Promise(function(e){if(t.mIndexBegin>-1&&t.mIndexEnd>-1){for(var n=[],a=t.mIndexBegin;a<=t.mIndexEnd;a++)n=n.concat(t.months[a].days.filter(function(e){if(t.getTimestamp(e)>t.getTimestamp(t.firstSelectDay)&&t.getTimestamp(e)<t.getTimestamp(t.lastSelectDay))return t.$set(e,"active",!0),e}));e(n)}else e(new Array)})},confirm:function(){this.$emit("select",{start:this.firstSelectDay,end:this.lastSelectDay,range:this.range})},deconstruction:function(t){this.months.forEach(function(e){e.days.forEach(function(e){t(e)})})},setCustomData:function(){if(this.customData.length){var t=[];this.months.forEach(function(e){return t=t.concat(e.days)});for(var e=this.customDataIndex,n=0;n<this.customData.length;e++,n++){var a=t[e],r=this.customData[n];if(a.text&&r){var s=Object(c["a"])(r);if("string"===s)a.custom={text:r};else{if("object"!==s)throw"customData数组每项的类型应该是String或Object，但是得到的是".concat(s);a.custom=r}}}}}}},m=h,y=(n("UFR0"),n("KHd+")),g=Object(y["a"])(m,i,o,!1,null,"5b50d178",null),p=g.exports,v={name:"app",components:{DatePicker:p},data:function(){return{startDate:"",endDate:"",restday:[],workday:["2018-9-29","2018-9-30"],data:["￥1300","￥1345",{highlight:!0,text:"￥888"}],show:!0}},methods:{select:function(t){var e=t.start,n=t.end,a=t.range;this.startDate=e.odate,this.endDate=n.odate,console.log("range",a),this.show=!1},cancle:function(){this.show=!1}},created:function(){var t=this;setTimeout(function(){t.workday=["2018-8-25","2018-8-26","2018-8-27"],t.restday=["2018-8-22","2018-8-23","2018-8-24"],t.data=["￥1999",{text:"￥2018",bgcolor:"lightgreen"},{highlight:!0,text:"￥666"},{highlight:!0,text:"￥888",bgcolor:"gold"}]},2e3)}},D=v,w=(n("ZL7j"),Object(y["a"])(D,r,s,!1,null,null,null)),b=w.exports;new a["a"]({render:function(t){return t(b)}}).$mount("#app")},ZL7j:function(t,e,n){"use strict";var a=n("EDI0"),r=n.n(a);r.a}});
//# sourceMappingURL=app.8ad7ed70.js.map